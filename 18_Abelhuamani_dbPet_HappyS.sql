CREATE DATABASE dbPet_HappyS;
GO

set language spanish;

use dbPet_HappyS;
GO

-- tables
-- Table: CLIENTE
CREATE TABLE CLIENTE (
    IDCLI int  IDENTITY(1,1) NOT NULL,
    NOMCLI varchar(60)  NOT NULL,
    APECLI varchar(60)  NOT NULL,
    DNICLI char(8)  NOT NULL,
    TELCLI char(9)  NOT NULL,
    DIRCLI varchar(100)  NOT NULL,
    ESTCLI  CHAR(1) DEFAULT 'A',
	GMLCLI varchar(60)  NOT NULL,
    CODUBI char(6)  NOT NULL,
    CONSTRAINT CLIENTE_pk PRIMARY KEY  (IDCLI)
);

----INSERT INTO CLIENTE
INSERT INTO CLIENTE (NOMCLI, APECLI, DNICLI, TELCLI,DIRCLI,GMLCLI,CODUBI)
VALUES   ('Abel', 'Mamani','77436585','963214587','cerro azul','abel@gmail.com','130613'),
		('Jhanpool', 'Pancrasio','22455689','987456123','san vicente','Jhanpool@gmail.com','130601'),
		('Paul' , 'Quispe','78965321','951236478','imperial','Paul@gmail.com','130501'),
		('Jemina' ,'Asuncion','74852396','985632147','san luis','Jemina@gmail.com','130403'),
		('Cecilia' ,'Caceres','75214596','963214785','cerro de oro.com','Cecilia@gmail.com','130402'),
		('Esteban' ,'Rigoberto','76325894','987563214','lunahuana','Esteban@gmail.com','130206'),
		('Macarena' ,'Bautista','75315982','987451263','chincha','Macarena@gmail.com','130204'),
		('Jeremias' ,'Pantano','25413698','978456123','pisco','Jeremias@gmail.com','130203'),
		('Aria' ,'Hurtado','23456987','951427863','lima','Aria@gmail.com','130202'),
		('Pedro' ,'Castle','73156489','932145687','mira flores','Pedro@gmail.com','130201');

-- Table: EMPLEADO
CREATE TABLE EMPLEADO (
    IDEMP int IDENTITY(1,1) NOT NULL,
    NOMEMP varchar(60)  NOT NULL,
    APEEMP varchar(60)  NOT NULL,
    DNIEMP char(8)  NOT NULL,
    TELEMP char(9)  NOT NULL,
    DIREMP varchar(100)  NOT NULL,
    ESTEMP  CHAR(1) DEFAULT 'A',
    CODUBI char(6)  NOT NULL,
    CONSTRAINT EMPLEADO_pk PRIMARY KEY  (IDEMP)
);

----INSERT INTO EMPLEADO
INSERT INTO EMPLEADO (NOMEMP ,APEEMP, DNIEMP, TELEMP,DIREMP, CODUBI)
VALUES  ('Alma','Asto Atoche','74521365','974687432','chicnha vaja','110205'),
		('Jett','Robles Zambrano','71456585','975738742','callao','110107'),
		('Ben','Yucra Casas','76459325','954783867','AV brasil','110204'),
		('Consuelo','Jimenes Ladrillo','23126545','973654236','san benito','110304');

-- Table: PRODUCTO
CREATE TABLE PRODUCTO (
    IDPRO int IDENTITY(1,1) NOT NULL,
    NOMPRO varchar(60)  NOT NULL,
    MARPRO varchar(100)  NOT NULL,
    PREPRO decimal(5,2)  NOT NULL,
    CANTPRO int  NOT NULL,
    DESPRO varchar(60)  NOT NULL,
    FECPRO datetime  NOT NULL,
    CONSTRAINT PRODUCTO_pk PRIMARY KEY  (IDPRO)
);

----INSERT INTO PRODUCTO
INSERT PRODUCTO (NOMPRO,MARPRO,PREPRO,CANTPRO,DESPRO,FECPRO)
VALUES	('MAXI PUPPY','ROYAL CANIN','58','5','para perros','15/08/22'),
		('CANNAVET','RELAX','14','5','para perros','13/05/22'),
		('PRO PLAN ADULTO CAT','PURINA','26','5','para gatos','14/09/22'),
		('PACK MICHI','ROYAL CANIN','33','5','para gatos','10/08/22');

-- Table: UBIGEO
CREATE TABLE UBIGEO (
    CODUBI char(6)  NOT NULL,
	DEPUBI varchar(120)  NOT NULL,
    PROUBI varchar(120)  NOT NULL,
    DISUBI varchar(120)  NOT NULL,
    CONSTRAINT UBIGEO_pk PRIMARY KEY  (CODUBI)
);

----INSERT INTO UBIGEO
INSERT INTO UBIGEO (CODUBI,DEPUBI,PROUBI,DISUBI)
VALUES  ('110107','ICA','ICA','PUEBLO NUEVO '),
		('110204','ICA','CHINCHA','CHINCHA BAJA'),
		('110304','ICA','NAZCA','MARCONA'),
		('110205','ICA','CHINCHA','EL CARMEN'),
		('130201', 'LA LIBERTAD', 'ASCOPE', 'ASCOPE'),
		('130202', 'LA LIBERTAD', 'ASCOPE', 'CHICAMA'),
		('130203', 'LA LIBERTAD', 'ASCOPE', 'CHOCOPE'),
		('130204', 'LA LIBERTAD', 'ASCOPE', 'MAGDALENA DE CAO'),
		('130206', 'LA LIBERTAD', 'ASCOPE', 'RAZURI'),
		('130402', 'LA LIBERTAD', 'CHEPEN', 'PACANGA'),
		('130403', 'LA LIBERTAD', 'CHEPEN', 'PUEBLO NUEVO'),
		('130501', 'LA LIBERTAD', 'JULCAN', 'JULCAN'),
		('130601', 'LA LIBERTAD', 'OTUZCO', 'OTUZCO'),
		('130613', 'LA LIBERTAD', 'OTUZCO', 'SINSICAP'); 

-- Table: VENTA
CREATE TABLE VENTA (
    IDVEN int IDENTITY(1,1) NOT NULL,
    FACVEN char(8)  NOT NULL,
    FECVEN datetime  NOT NULL,
    ESTVEN  CHAR(1) DEFAULT 'A'  NOT NULL,
    IDCLI int  NOT NULL,
    IDEMP int  NOT NULL,
    CONSTRAINT VENTA_pk PRIMARY KEY  (IDVEN)
);

----INSERT INTO VENTA
INSERT INTO VENTA (FACVEN,FECVEN,IDEMP,IDCLI)
	VALUES  ('12345678','22/04/22','1','1'),
			('12345678','22/05/22','2','3'),
			---
			('12345678','22/05/22','2','1'),
			('12345678','22/05/22','2','2'),
			('12345678','22/05/22','2','1'),
			('12345678','22/05/22','2','3'),
			('12345678','22/05/22','2','1'),
			('12345678','22/05/22','2','2'),
			('12345678','22/05/22','2','1'),
			---
			('12345678','22/03/22','1','3');

-- Table: VENTA_DETALLE
CREATE TABLE VENTA_DETALLE (
    IDVENT int IDENTITY(1,1)  NOT NULL,
    CANVENT int  NOT NULL,
    IDVEN int  NOT NULL,
    IDPRO int  NOT NULL,
    CONSTRAINT VENTA_DETALLE_pk PRIMARY KEY  (IDVENT)
);

----INSERT INTO VENTA
INSERT INTO VENTA_DETALLE(CANVENT,IDVEN,IDPRO)
VALUES  ('10','1','1'),
		('5','2','2'),
		--
		('4','1','1'),
		('2','2','2'),
		('5','1','1'),
		('3','2','2'),
		('2','1','1'),
		('1','2','2'),
		('3','1','1'),
		--
		('2','3','1');

-- foreign keys
-- Reference: CLIENTE_UBIGEO (table: CLIENTE)
ALTER TABLE CLIENTE ADD CONSTRAINT CLIENTE_UBIGEO
    FOREIGN KEY (CODUBI)
    REFERENCES UBIGEO (CODUBI);

-- Reference: EMPLEADO_UBIGEO (table: EMPLEADO)
ALTER TABLE EMPLEADO ADD CONSTRAINT EMPLEADO_UBIGEO
    FOREIGN KEY (CODUBI)
    REFERENCES UBIGEO (CODUBI);

-- Reference: VENTA_CLIENTE (table: VENTA)
ALTER TABLE VENTA ADD CONSTRAINT VENTA_CLIENTE
    FOREIGN KEY (IDCLI)
    REFERENCES CLIENTE (IDCLI);

-- Reference: VENTA_DETALLE_PRODUCTO (table: VENTA_DETALLE)
ALTER TABLE VENTA_DETALLE ADD CONSTRAINT VENTA_DETALLE_PRODUCTO
    FOREIGN KEY (IDPRO)
    REFERENCES PRODUCTO (IDPRO);

-- Reference: VENTA_DETALLE_VENTA (table: VENTA_DETALLE)
ALTER TABLE VENTA_DETALLE ADD CONSTRAINT VENTA_DETALLE_VENTA
    FOREIGN KEY (IDVEN)
    REFERENCES VENTA (IDVEN);

-- Reference: VENTA_EMPLEADO (table: VENTA)
ALTER TABLE VENTA ADD CONSTRAINT VENTA_EMPLEADO
    FOREIGN KEY (IDEMP)
    REFERENCES EMPLEADO (IDEMP);

-- End of file.
 
SELECT * FROM CLIENTE
SELECT * FROM EMPLEADO
SELECT * FROM PRODUCTO
SELECT * FROM UBIGEO
SELECT * FROM VENTA
SELECT * FROM VENTA_DETALLE